{"version":3,"sources":["assets/vendor/slides.js"],"names":["window","PERMANENT_URL_PREFIX","curSlide","SLIDE_CLASSES","PM_TOUCH_SENSITIVITY","getSlideEl","no","slideEls","length","updateSlideClass","slideNo","className","el","i","classList","add","remove","updateSlides","triggerLeaveEvent","triggerEnterEvent","setTimeout","disableSlideFrames","enableSlideFrames","isChromeVoxActive","speakAndSyncToNode","updateHash","buildNextItem","toBuild","querySelectorAll","prevSlide","nextSlide","onEnter","getAttribute","Function","call","evt","document","createEvent","initEvent","slideNumber","dispatchEvent","onLeave","handleTouchStart","event","touches","touchDX","touchDY","touchStartX","pageX","touchStartY","pageY","body","addEventListener","handleTouchMove","handleTouchEnd","cancelTouch","dx","Math","abs","dy","removeEventListener","frames","frame","getElementsByTagName","disableFrame","enableFrame","src","_src","setupFrames","setupInteraction","createElement","id","querySelector","appendChild","cvox","node","ChromeVox","navigationManager","switchToStrategy","ChromeVoxNavigationManager","STRATEGIES","LINEARDOM","syncToNode","ChromeVoxUserCommands","finishNavCommand","target","firstChild","speakNextItem","next","DomUtil","isDescendantOfNode","getCurrentNode","speakPrevItem","previous","lastChild","getCurSlideFromHash","parseInt","location","hash","substr","replace","handleBodyKeyDown","keyCode","preventDefault","addEventListeners","addPrettify","els","contains","type","onload","addFontStyle","addGeneralStyle","rel","href","name","content","makeBuildLists","slide","selector","items","item","j","handleDomLoaded","initialize","_DEBUG","_DCL","view","classListProp","elemCtrProto","HTMLElement","Element","objCtr","Object","strTrim","String","trim","arrIndexOf","Array","indexOf","len","DOMEx","message","code","DOMException","checkTokenAndGetIndex","token","test","ClassList","elem","trimmedClasses","classes","split","push","_updateClassName","toString","classListProto","classListGetter","Error","index","splice","toggle","join","defineProperty","classListPropDesc","get","enumerable","configurable","ex","number","__defineGetter__","self","script","s","parentNode","insertBefore","removeChild"],"mappings":"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","file":"slides.04201fd2.js","sourceRoot":"..","sourcesContent":["/*\n  Google HTML5 slides template\n\n  Authors: Luke Mah√© (code)\n           Marcin Wichary (code and design)\n\n           Dominic Mazzoni (browser compatibility)\n           Charles Chen (ChromeVox support)\n\n  URL: http://code.google.com/p/html5slides/\n*/\n\nwindow.PERMANENT_URL_PREFIX = window.PERMANENT_URL_PREFIX || 'assets/vendor/';\n\nlet SLIDE_CLASSES = ['far-past', 'past', 'current', 'next', 'far-next'];\n\nlet PM_TOUCH_SENSITIVITY = 15;\n\nlet curSlide;\n\n/* ---------------------------------------------------------------------- */\n/* classList polyfill by Eli Grey\n * (http://purl.eligrey.com/github/classList.js/blob/master/classList.js) */\n\nif (typeof document !== 'undefined' && !('classList' in document.createElement('a'))) {\n\n  (function (view) {\n    let classListProp = 'classList',\n      protoProp = 'prototype',\n      elemCtrProto = (view.HTMLElement || view.Element)[protoProp],\n      objCtr = Object;\n    (strTrim =\n      String[protoProp].trim ||\n      function () {\n        return this.replace(/^\\s+|\\s+$/g, '');\n      }),\n    (arrIndexOf =\n      Array[protoProp].indexOf ||\n      function (item) {\n        for (let i = 0, len = this.length; i < len; i++) {\n          if (i in this && this[i] === item) {\n            return i;\n          }\n        }\n        return -1;\n      }),\n    // Vendors: please allow content code to instantiate DOMExceptions\n    (DOMEx = function (type, message) {\n      this.name = type;\n      this.code = DOMException[type];\n      this.message = message;\n    }),\n    (checkTokenAndGetIndex = function (classList, token) {\n      if (token === '') {\n        throw new DOMEx('SYNTAX_ERR', 'An invalid or illegal string was specified');\n      }\n      if (/\\s/.test(token)) {\n        throw new DOMEx('INVALID_CHARACTER_ERR', 'String contains an invalid character');\n      }\n      return arrIndexOf.call(classList, token);\n    }),\n    (ClassList = function (elem) {\n      let trimmedClasses = strTrim.call(elem.className),\n        classes = trimmedClasses ? trimmedClasses.split(/\\s+/) : [];\n      for (let i = 0, len = classes.length; i < len; i++) {\n        this.push(classes[i]);\n      }\n      this._updateClassName = function () {\n        elem.className = this.toString();\n      };\n    }),\n    (classListProto = ClassList[protoProp] = []),\n    (classListGetter = function () {\n      return new ClassList(this);\n    });\n    // Most DOMException implementations don't allow calling DOMException's toString()\n    // on non-DOMExceptions. Error's toString() is sufficient here.\n    DOMEx[protoProp] = Error[protoProp];\n    classListProto.item = function (i) {\n      return this[i] || null;\n    };\n    classListProto.contains = function (token) {\n      token += '';\n      return checkTokenAndGetIndex(this, token) !== -1;\n    };\n    classListProto.add = function (token) {\n      token += '';\n      if (checkTokenAndGetIndex(this, token) === -1) {\n        this.push(token);\n        this._updateClassName();\n      }\n    };\n    classListProto.remove = function (token) {\n      token += '';\n      let index = checkTokenAndGetIndex(this, token);\n      if (index !== -1) {\n        this.splice(index, 1);\n        this._updateClassName();\n      }\n    };\n    classListProto.toggle = function (token) {\n      token += '';\n      if (checkTokenAndGetIndex(this, token) === -1) {\n        this.add(token);\n      } else {\n        this.remove(token);\n      }\n    };\n    classListProto.toString = function () {\n      return this.join(' ');\n    };\n\n    if (objCtr.defineProperty) {\n      let classListPropDesc = {\n        get: classListGetter,\n        enumerable: true,\n        configurable: true,\n      };\n      try {\n        objCtr.defineProperty(elemCtrProto, classListProp, classListPropDesc);\n      } catch (ex) {\n        // IE 8 doesn't support enumerable:true\n        if (ex.number === -0x7ff5ec54) {\n          classListPropDesc.enumerable = false;\n          objCtr.defineProperty(elemCtrProto, classListProp, classListPropDesc);\n        }\n      }\n    } else if (objCtr[protoProp].__defineGetter__) {\n      elemCtrProto.__defineGetter__(classListProp, classListGetter);\n    }\n  })(self);\n}\n/* ---------------------------------------------------------------------- */\n\n/* Slide movement */\n\nfunction getSlideEl(no) {\n  if ((no < 0) || (no >= slideEls.length)) {\n    return null;\n  }\n  return slideEls[no];\n\n}\n\nfunction updateSlideClass(slideNo, className) {\n  let el = getSlideEl(slideNo);\n\n  if (!el) {\n    return;\n  }\n\n  if (className) {\n    el.classList.add(className);\n  }\n\n  for (let i in SLIDE_CLASSES) {\n    if (className != SLIDE_CLASSES[i]) {\n      el.classList.remove(SLIDE_CLASSES[i]);\n    }\n  }\n}\n\nfunction updateSlides() {\n  for (let i = 0; i < slideEls.length; i++) {\n    switch (i) {\n      case curSlide - 2:\n        updateSlideClass(i, 'far-past');\n        break;\n      case curSlide - 1:\n        updateSlideClass(i, 'past');\n        break;\n      case curSlide:\n        updateSlideClass(i, 'current');\n        break;\n      case curSlide + 1:\n        updateSlideClass(i, 'next');\n        break;\n      case curSlide + 2:\n        updateSlideClass(i, 'far-next');\n        break;\n      default:\n        updateSlideClass(i);\n        break;\n    }\n  }\n\n  triggerLeaveEvent(curSlide - 1);\n  triggerEnterEvent(curSlide);\n\n  window.setTimeout(() => {\n    // Hide after the slide\n    disableSlideFrames(curSlide - 2);\n  }, 301);\n\n  enableSlideFrames(curSlide - 1);\n  enableSlideFrames(curSlide + 2);\n\n  if (isChromeVoxActive()) {\n    speakAndSyncToNode(slideEls[curSlide]);\n  }\n\n  updateHash();\n}\n\nfunction buildNextItem() {\n  let toBuild = slideEls[curSlide].querySelectorAll('.to-build');\n\n  if (!toBuild.length) {\n    return false;\n  }\n\n  toBuild[0].classList.remove('to-build');\n\n  if (isChromeVoxActive()) {\n    speakAndSyncToNode(toBuild[0]);\n  }\n\n  return true;\n}\n\nfunction prevSlide() {\n  if (curSlide > 0) {\n    curSlide--;\n    updateSlides();\n  }\n}\n\nfunction nextSlide() {\n  if (buildNextItem()) {\n    return;\n  }\n\n  if (curSlide < slideEls.length - 1) {\n    curSlide++;\n    updateSlides();\n  }\n}\n\nfunction triggerEnterEvent(no) {\n  let el = getSlideEl(no);\n  if (!el) {\n    return;\n  }\n\n  let onEnter = el.getAttribute('onslideenter');\n  if (onEnter) {\n    new Function(onEnter).call(el);\n  }\n\n  let evt = document.createEvent('Event');\n  evt.initEvent('slideenter', true, true);\n  evt.slideNumber = no + 1; // Make it readable\n\n  el.dispatchEvent(evt);\n}\n\nfunction triggerLeaveEvent(no) {\n  let el = getSlideEl(no);\n  if (!el) {\n    return;\n  }\n\n  let onLeave = el.getAttribute('onslideleave');\n  if (onLeave) {\n    new Function(onLeave).call(el);\n  }\n\n  let evt = document.createEvent('Event');\n  evt.initEvent('slideleave', true, true);\n  evt.slideNumber = no + 1; // Make it readable\n\n  el.dispatchEvent(evt);\n}\n\n/* Touch events */\n\nfunction handleTouchStart(event) {\n  if (event.touches.length == 1) {\n    touchDX = 0;\n    touchDY = 0;\n\n    touchStartX = event.touches[0].pageX;\n    touchStartY = event.touches[0].pageY;\n\n    document.body.addEventListener('touchmove', handleTouchMove, true);\n    document.body.addEventListener('touchend', handleTouchEnd, true);\n  }\n}\n\nfunction handleTouchMove(event) {\n  if (event.touches.length > 1) {\n    cancelTouch();\n  } else {\n    touchDX = event.touches[0].pageX - touchStartX;\n    touchDY = event.touches[0].pageY - touchStartY;\n  }\n}\n\nfunction handleTouchEnd(event) {\n  let dx = Math.abs(touchDX);\n  let dy = Math.abs(touchDY);\n\n  if (dx > PM_TOUCH_SENSITIVITY && dy < dx * 2 / 3) {\n    if (touchDX > 0) {\n      prevSlide();\n    } else {\n      nextSlide();\n    }\n  }\n\n  cancelTouch();\n}\n\nfunction cancelTouch() {\n  document.body.removeEventListener('touchmove', handleTouchMove, true);\n  document.body.removeEventListener('touchend', handleTouchEnd, true);\n}\n\n/* Preloading frames */\n\nfunction disableSlideFrames(no) {\n  let el = getSlideEl(no);\n  if (!el) {\n    return;\n  }\n\n  let frames = el.getElementsByTagName('iframe');\n  for (var i = 0, frame;\n    (frame = frames[i]); i++) {\n    disableFrame(frame);\n  }\n}\n\nfunction enableSlideFrames(no) {\n  let el = getSlideEl(no);\n  if (!el) {\n    return;\n  }\n\n  let frames = el.getElementsByTagName('iframe');\n  for (var i = 0, frame;\n    (frame = frames[i]); i++) {\n    enableFrame(frame);\n  }\n}\n\nfunction disableFrame(frame) {\n  frame.src = 'about:blank';\n}\n\nfunction enableFrame(frame) {\n  let src = frame._src;\n\n  if (frame.src != src && src != 'about:blank') {\n    frame.src = src;\n  }\n}\n\nfunction setupFrames() {\n  let frames = document.querySelectorAll('iframe');\n  for (var i = 0, frame;\n    (frame = frames[i]); i++) {\n    frame._src = frame.src;\n    disableFrame(frame);\n  }\n\n  enableSlideFrames(curSlide);\n  enableSlideFrames(curSlide + 1);\n  enableSlideFrames(curSlide + 2);\n}\n\nfunction setupInteraction() {\n  /* Clicking and tapping */\n\n  var el = document.createElement('div');\n  el.className = 'slide-area';\n  el.id = 'prev-slide-area';\n  el.addEventListener('click', prevSlide, false);\n  document.querySelector('section.slides').appendChild(el);\n\n  var el = document.createElement('div');\n  el.className = 'slide-area';\n  el.id = 'next-slide-area';\n  el.addEventListener('click', nextSlide, false);\n  document.querySelector('section.slides').appendChild(el);\n\n  /* Swiping */\n\n  document.body.addEventListener('touchstart', handleTouchStart, false);\n}\n\n/* ChromeVox support */\n\nfunction isChromeVoxActive() {\n  if (typeof (cvox) == 'undefined') {\n    return false;\n  }\n  return true;\n\n}\n\nfunction speakAndSyncToNode(node) {\n  if (!isChromeVoxActive()) {\n    return;\n  }\n\n  cvox.ChromeVox.navigationManager.switchToStrategy(cvox.ChromeVoxNavigationManager.STRATEGIES.LINEARDOM, 0, true);\n  cvox.ChromeVox.navigationManager.syncToNode(node);\n  cvox.ChromeVoxUserCommands.finishNavCommand('');\n  let target = node;\n  while (target.firstChild) {\n    target = target.firstChild;\n  }\n  cvox.ChromeVox.navigationManager.syncToNode(target);\n}\n\nfunction speakNextItem() {\n  if (!isChromeVoxActive()) {\n    return;\n  }\n\n  cvox.ChromeVox.navigationManager.switchToStrategy(cvox.ChromeVoxNavigationManager.STRATEGIES.LINEARDOM, 0, true);\n  cvox.ChromeVox.navigationManager.next(true);\n  if (!cvox.DomUtil.isDescendantOfNode(cvox.ChromeVox.navigationManager.getCurrentNode(), slideEls[curSlide])) {\n    let target = slideEls[curSlide];\n    while (target.firstChild) {\n      target = target.firstChild;\n    }\n    cvox.ChromeVox.navigationManager.syncToNode(target);\n    cvox.ChromeVox.navigationManager.next(true);\n  }\n  cvox.ChromeVoxUserCommands.finishNavCommand('');\n}\n\nfunction speakPrevItem() {\n  if (!isChromeVoxActive()) {\n    return;\n  }\n\n  cvox.ChromeVox.navigationManager.switchToStrategy(cvox.ChromeVoxNavigationManager.STRATEGIES.LINEARDOM, 0, true);\n  cvox.ChromeVox.navigationManager.previous(true);\n  if (!cvox.DomUtil.isDescendantOfNode(cvox.ChromeVox.navigationManager.getCurrentNode(), slideEls[curSlide])) {\n    let target = slideEls[curSlide];\n    while (target.lastChild) {\n      target = target.lastChild;\n    }\n    cvox.ChromeVox.navigationManager.syncToNode(target);\n    cvox.ChromeVox.navigationManager.previous(true);\n  }\n  cvox.ChromeVoxUserCommands.finishNavCommand('');\n}\n\n/* Hash functions */\n\nfunction getCurSlideFromHash() {\n  let slideNo = parseInt(location.hash.substr(1));\n\n  if (slideNo) {\n    curSlide = slideNo - 1;\n  } else {\n    curSlide = 0;\n  }\n}\n\nfunction updateHash() {\n  location.replace(`#${  curSlide + 1}`);\n}\n\n/* Event listeners */\n\nfunction handleBodyKeyDown(event) {\n  switch (event.keyCode) {\n    case 39: // right arrow\n    case 13: // Enter\n    case 32: // space\n    case 34: // PgDn\n      nextSlide();\n      event.preventDefault();\n      break;\n\n    case 37: // left arrow\n    case 8: // Backspace\n    case 33: // PgUp\n      prevSlide();\n      event.preventDefault();\n      break;\n\n    case 40: // down arrow\n      if (isChromeVoxActive()) {\n        speakNextItem();\n      } else {\n        nextSlide();\n      }\n      event.preventDefault();\n      break;\n\n    case 38: // up arrow\n      if (isChromeVoxActive()) {\n        speakPrevItem();\n      } else {\n        prevSlide();\n      }\n      event.preventDefault();\n      break;\n  }\n}\n\nfunction addEventListeners() {\n  document.addEventListener('keydown', handleBodyKeyDown, false);\n}\n\n/* Initialization */\n\nfunction addPrettify() {\n  let els = document.querySelectorAll('pre');\n  for (var i = 0, el;\n    (el = els[i]); i++) {\n    if (!el.classList.contains('noprettyprint')) {\n      el.classList.add('prettyprint');\n    }\n  }\n\n  var el = document.createElement('script');\n  el.type = 'text/javascript';\n  el.src = `${PERMANENT_URL_PREFIX}prettify.js`;\n  el.onload = function () {\n    // prettyPrint(); don't need it!\n  };\n  document.body.appendChild(el);\n}\n\nfunction addFontStyle() {\n  return; // NONONONON\n  let el = document.createElement('link');\n  el.rel = 'stylesheet';\n  el.type = 'text/css';\n  el.href =\n    'http://fonts.googleapis.com/css?family=' + 'Open+Sans:regular,semibold,italic,italicsemibold|Droid+Sans+Mono';\n\n  document.body.appendChild(el);\n}\n\nfunction addGeneralStyle() {\n  var el = document.createElement('link');\n  el.rel = 'stylesheet';\n  el.type = 'text/css';\n  el.href = `${PERMANENT_URL_PREFIX  }styles.css`;\n  document.body.appendChild(el);\n\n  var el = document.createElement('meta');\n  el.name = 'viewport';\n  el.content = 'width=1100,height=750';\n  document.querySelector('head').appendChild(el);\n\n  var el = document.createElement('meta');\n  el.name = 'apple-mobile-web-app-capable';\n  el.content = 'yes';\n  document.querySelector('head').appendChild(el);\n}\n\nfunction makeBuildLists() {\n  for (var i = curSlide, slide;\n    (slide = slideEls[i]); i++) {\n    let selector = '.build > *';\n    if (slide.classList.contains('build')) {\n      selector += ':not(:first-child)'\n    }\n    let items = slide.querySelectorAll(selector);\n    for (var j = 0, item;\n      (item = items[j]); j++) {\n      if (item.classList) {\n        item.classList.add('to-build');\n      }\n    }\n  }\n}\n\nfunction handleDomLoaded() {\n  slideEls = document.querySelectorAll('section.slides > article');\n\n  setupFrames();\n\n  addFontStyle();\n  // addGeneralStyle(); do it myself\n  addPrettify();\n  addEventListeners();\n\n  updateSlides();\n\n  setupInteraction();\n  makeBuildLists();\n\n  document.body.classList.add('loaded');\n}\n\nfunction initialize() {\n  getCurSlideFromHash();\n\n  if (window._DEBUG) {\n    PERMANENT_URL_PREFIX = '../';\n  }\n\n  if (window._DCL) {\n    handleDomLoaded();\n  } else {\n    document.addEventListener('DOMContentLoaded', handleDomLoaded, false);\n  }\n}\n\n// If ?debug exists then load the script relative instead of absolute\nif (!window._DEBUG && document.location.href.indexOf('?debug') !== -1) {\n  document.addEventListener(\n    'DOMContentLoaded',\n    function () {\n      // Avoid missing the DomContentLoaded event\n      window['_DCL'] = true;\n    },\n    false\n  );\n\n  window._DEBUG = true;\n  let script = document.createElement('script');\n  script.type = 'text/javascript';\n  script.src = '../slides.js';\n  let s = document.getElementsByTagName('script')[0];\n  s.parentNode.insertBefore(script, s);\n\n  // Remove this script\n  s.parentNode.removeChild(s);\n} else {\n  initialize();\n}\n"]}